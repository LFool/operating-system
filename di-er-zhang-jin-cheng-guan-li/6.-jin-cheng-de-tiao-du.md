# 6. 进程的调度

## 1. 调度的概念

当有一堆任务需要处理的时候，但由于资源有限，这些事情没发同时处理。这就需要确定某种规则来决定处理这些任务的顺序，这就是“调度”研究的问题

## 2. 调度的三个层次

### 2.1 高级调度

先明确一个概念：

* **作业：**一个具体的任务
* 用户向系统提交一个作业 ≈ 用户让操作系统启动一个程序（来处理一个具体的任务）

**高级调度（作业调度）：**按一定的原则从外存的作业后备队列中选择一个作业调入内存，并创建进程。**每个作业只调入一次，调出一次**。作业调入时会建立 PCB，调出时才撤销 PCB 

> 好几个程序需要启动，到底先启动哪个

### 2.2 中级调度

当内存不够时，可能会把某些进程的数据调出到外存。等内存空闲时或者进程需要运行时再重新调入内存中

暂时调到外存等待的进程状态为**挂起状态**。被挂起的进程 PCB 会被组织成挂起队列

**中级调度（内存调度）：**按照某种策略决定将哪个处于挂起的进程重新调入内存。一个进程可能多次调出、调入内存，因此**中级调度**发生的**频率**要比高级调度**高**



#### 补充知识：进程的挂起态 & 七状态模型

暂时调到外存等待的进程状态为**挂起状态（挂起态，suspend）**

挂起态可以分为**就绪挂起**、**阻塞挂起**两种

![](../.gitbook/assets/image%20%2818%29.png)

**挂起 & 阻塞 区别**

两种都是不能获得 CPU 的服务，但是挂起态是将进程从内存调出到外存中，而阻塞态的进程依然在内存中

有的操作系统会把就绪挂起和阻塞挂起分为两个队列，甚至可以根据阻塞的原因将阻塞队列细分为更多的队列

### 2.3 低级调度

低级调度（进程调度 / 处理机调度）：按照某种策略从就绪队列中选取一个进程，将处理机分配给它（内存 -&gt; CPU）

进程调度是操作系统中最基本的一种调度，在一般的操作系统中都必须配置进程调度。进程调度的频率很高，一般几十毫秒一次。

### 2.4 三种调度的联系 & 对比

|  | **要做什么** | **调度发生在...** | **发生频率** | **对进程状态的影响** |
| :---: | :---: | :---: | :---: | :---: |
| 高级调度（作业调度） | 按照某种规则，从后备队列中选择合适的的作业将其调入内存中，并为其创建进程 | 外存 -&gt; 内存（面向作业） | 最低 | 无 -&gt; 创建态 -&gt; 就绪态 |
| 中级调度（内存调度） | 按照某种规则，从挂起队列中选择合适的的进程将其数据调回内存 | 外存 -&gt; 内存（面向进程） | 中等 | 挂起态 -&gt; 就绪态（阻塞挂起 -&gt; 阻塞态） |
| 低级调度（进程调度） | 按照某种规则，从就绪队列中选择一个进程为其分配处理机 | 内存 -&gt; CPU | 最高 | 就绪态 -&gt; 运行态 |



